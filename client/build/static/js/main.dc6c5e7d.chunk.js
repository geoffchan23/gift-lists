(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(49)},28:function(e,t,n){},37:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),s=n.n(o),i=(n(28),n(7)),l=n(8),c=n(11),u=n(9),d=n(12),p=n(51),m=n(50),h=n(3),f=n.n(h),g=n(13),E=n(52),v=n(18),w=n.n(v),b=(n(37),"http://192.243.102.90:9000"),k=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedSearchObj:void 0,listSearchText:"",email:"",lists:[],showWarning:!1,password:""},n.handleListSearchChange=function(e){n.setState({listSearchText:e.target.value})},n.handleAutocompleteSelect=function(e,t){n.setState({listSearchText:e,selectedSearchObj:t})},n.handleNameChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.getFilteredListsFromServer=Object(g.a)(f.a.mark(function e(){var t,a,r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.state.email&&" "!==n.state.email){e.next=2;break}return e.abrupt("return");case 2:return t=new URL(b+"/api/lists"),a={email:n.state.email},Object.keys(a).forEach(function(e){return t.searchParams.append(e,a[e])}),e.next=7,fetch(t);case 7:return r=e.sent,e.next=10,r.json();case 10:o=e.sent,n.setState({lists:o});case 12:case"end":return e.stop()}},e,this)})),n.goToList=function(e){e.preventDefault();var t=n.state.lists.filter(function(e){return e.name.toLowerCase()===n.state.listSearchText.toLowerCase()});t.length?n.props.history.push("/list/".concat(t[0].id),{password:n.state.password}):n.setState({showWarning:!0})},n.createList=function(){var e=Object(g.a)(f.a.mark(function e(t){var a,r,o,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new URL(b+"/api/lists"),r={name:n.state.listSearchText,createdBy:n.state.email,password:n.state.password},Object.keys(r).forEach(function(e){return a.searchParams.append(e,r[e])}),e.next=6,fetch(a,{method:"POST"});case 6:return o=e.sent,e.next=9,o.json();case 9:s=e.sent,n.props.history.push("/list/".concat(s.id),{password:n.state.password});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.handleListSearchChange,t=this.handleAutocompleteSelect,n=this.handleNameChange,a=this.goToList,o=this.createList,s=this.getFilteredListsFromServer,i=this.handlePasswordChange,l=this.state,c=l.listSearchText,u=l.email,d=l.lists,p=l.showWarning,m=l.password;return r.a.createElement("form",{className:"Login"},r.a.createElement("h1",null,"Gift Lists"),r.a.createElement("p",null,"Create and share gift lists with friends and family"),r.a.createElement("input",{placeholder:"Enter email",value:u,onChange:n,onBlur:s,autoComplete:"on",type:"email"}),r.a.createElement(w.a,{wrapperProps:{className:"autocomplete"},inputProps:{placeholder:"List name"},value:c,items:d||[],onChange:e,onSelect:t,renderItem:function(e,t){return r.a.createElement("div",{style:{background:t?"lightgray":"white"},key:e.id,className:"autocomplete-item"},e.name)},getItemValue:function(e,t){return e.name},shouldItemRender:function(e,t){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}}),r.a.createElement("input",{value:m,onChange:i,placeholder:"Enter a password (optional)",type:"password",className:"password"}),p&&r.a.createElement("span",{className:"warning"},"This list does not exist. Click ",r.a.createElement("strong",null,"Create New List")," to create it."),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{onClick:a,disabled:""===c||" "===c},"Go To List"),r.a.createElement("button",{onClick:o,disabled:""===c||" "===c},"Create New List")))}}]),t}(r.a.Component),C=Object(E.a)(k),O=n(6),j=n(21),S=(n(41),n(5)),y=(n(43),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showEditButton:!0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.nameInput.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.inputProps,a=t.children,o=t.editMode,s=t.handleToggleEditMode,i=t.className,l=t.clickToEdit;return r.a.createElement("div",{className:"EditInput ".concat(i)},r.a.createElement("input",Object.assign({},n,{ref:function(t){e.nameInput=t},className:o?"visible":"hidden",onBlur:function(e){return s(e,!0)},onKeyPress:function(e){return"Enter"===e.key?s(e,!0):null}})),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:!1===l?null:s},a),r.a.createElement("button",{onClick:function(){s()},className:"edit-btn"},"Edit ",r.a.createElement(S.e,null))))}}]),t}(r.a.Component)),x=(n(45),function(e){var t=e.id,n=e.name,a=e.list,o=e.selected,s=e.index,i=e.editInputField,l=e.removePerson,c=e.handleEditInput,u=e.handleToggleEditMode,d=e.bringPersonToFront,p=e.addGift,m=e.handleUpdateGift,h=e.removeGift;return r.a.createElement("div",{className:["Person"+(o?" selected":"")],onClick:function(){return d(t)},style:{zIndex:s,left:60*s+"px"}},r.a.createElement(y,{editMode:"name"===i,inputProps:{value:n,placeholder:"Enter name",onChange:function(e){return c(s,"name",e)}},handleToggleEditMode:function(e,t){return u(s,t?"":"name")},className:"person-edit-name"},r.a.createElement("h3",null,""===n?"Click to enter name":n)),r.a.createElement("ul",null,a.map(function(e,t){return r.a.createElement("li",{key:e.id},r.a.createElement("div",null,r.a.createElement(y,{editMode:i===e.id+"gift.name",inputProps:{value:e.name,placeholder:"Enter gift",onChange:function(t){return m(s,e.id,"gift.name",t)}},handleToggleEditMode:function(t,n){return u(s,n?"":e.id+"gift.name")},className:"gift-edit-name"},r.a.createElement("h4",null,t+1,") ",""===e.name?"Click to enter name":e.name)),r.a.createElement(y,{editMode:i===e.id+"gift.link",inputProps:{value:e.link,placeholder:"Enter link",onChange:function(t){return m(s,e.id,"gift.link",t)}},handleToggleEditMode:function(t,n){return u(s,n?"":e.id+"gift.link")},className:"gift-edit-input",clickToEdit:""===e.link},""===e.link?r.a.createElement("span",null,"Click to enter link"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"gift-link-label"},e.link),r.a.createElement("a",{href:e.link,target:"_"},"Link"))),r.a.createElement("button",{onClick:function(){return h(s,e.id)},className:"remove-gift-btn"},r.a.createElement(S.d,null))))}),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return p(s,e)},className:"add-gift-btn"},"Add Gift ",r.a.createElement(S.a,null)))),r.a.createElement("button",{onClick:function(e){return l(s,e)},className:"remove-person-btn"},r.a.createElement(S.c,null)))});function P(){var e=8,t=+new Date;return function(){for(var n,a,r=t.toString().split("").reverse(),o="",s=0;s<e;++s)o+=r[(n=0,a=r.length-1,Math.floor(Math.random()*(a-n+1))+n)];return o}()}var L="http://192.243.102.90:9000",N=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={listInfo:{},people:[],showEnterPassword:!1,password:void 0,errorMsg:null},n.componentWillMount=Object(g.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getListInfoFromServer();case 2:case"end":return e.stop()}},e,this)})),n.getListInfoFromServer=Object(g.a)(f.a.mark(function e(){var t,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("password",n.state.password,n.props.history.location),t=n.state.password,n.props.history.location.state&&""!==n.props.history.location.state.password&&(t=n.props.history.location.state.password),e.next=5,fetch("".concat(L,"/api/lists/").concat(n.props.match.params.listId,"?password=").concat(t));case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent).error?n.setState({showEnterPassword:!0,errorMsg:2===r.error?r.msg:null}):(r.people=r.people.length?n.indexList(r.people):[{name:"",list:[],selected:!0,index:0,editMode:!0,editInputField:"name",id:P()}],console.log(r),n.setState({listInfo:Object(j.a)({},r,{people:void 0}),people:r.people,showEnterPassword:!1}));case 10:case"end":return e.stop()}},e,this)})),n.indexList=function(e){return e.map(function(t,n){return t.index=n,t.editInputField="",t.selected=n===e.length-1,t.id=P(),t})},n.bringPersonToFront=function(e){if(console.log("bringPersonToFront"),n.state.people.filter(function(e){return e.selected})[0].id!==e){var t=Object(O.a)(n.state.people),a=0;t=t.map(function(n){return n.id===e?(n.index=t.length-1,n.selected=!0):(n.index=a,n.selected=!1,a++),n}),n.setState({people:t})}},n.createPersonCard=function(){console.log("createPersonCard");var e=Object(O.a)(n.state.people);0!==e.length&&(e.filter(function(e){return e.selected})[0].selected=!1);e.push({name:"",list:[],selected:!0,index:e.length,editMode:!0,editInputField:"name",id:P()}),n.setState({people:e})},n.removePerson=function(e,t){console.log("removePerson");var a=Object(O.a)(n.state.people).filter(function(t){return t.index!==e});a=n.indexList(a),n.setState({people:a},function(){return n.updateListOnServer()}),t.stopPropagation()},n.handleToggleEditMode=function(e,t){console.log("handleToggleEditMode",e,t),n.setState({people:Object(O.a)(n.state.people.map(function(n){return n.index===e&&(n.editInputField=t),n}))}),t&&""!==t||n.updateListOnServer()},n.handleEditInput=function(e,t,a){console.log("handleEditInput",e,t),n.setState({people:Object(O.a)(n.state.people.map(function(n){return n.index===e&&(n[t]=a.target.value),n}))})},n.addGift=function(e,t){console.log("addGift",e),n.setState({people:Object(O.a)(n.state.people.map(function(t){return t.index===e&&t.list.push({id:P(),name:"",link:""}),t}))}),t.stopPropagation()},n.handleUpdateGift=function(e,t,a,r){console.log("handleUpdateGift",e,t,a),n.setState({people:Object(O.a)(n.state.people.map(function(n){n.index===e&&(n.list.filter(function(e){return e.id===t})[0][a.split(".")[1]]=r.target.value);return n}))})},n.removeGift=function(e,t){n.setState({people:Object(O.a)(n.state.people.map(function(n){return n.index===e&&(n.list=n.list.filter(function(e){return e.id!==t})),n}))},function(){return n.updateListOnServer()})},n.updateListOnServer=Object(g.a)(f.a.mark(function e(){var t,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.state.people)},e.next=3,fetch("".concat(L,"/api/lists/").concat(n.props.match.params.listId),t);case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log("response from PATCH",r);case 8:case"end":return e.stop()}},e,this)})),n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.submitPassword=function(){n.setState({errorMsg:null},function(){n.getListInfoFromServer()})},n.goBack=function(){n.props.history.push("/")},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.listInfo,n=e.people,a=e.showEnterPassword,o=e.password,s=e.errorMsg,i=this.bringPersonToFront,l=this.createPersonCard,c=this.removePerson,u=this.handleToggleEditMode,d=this.handleEditInput,p=this.addGift,m=this.handleUpdateGift,h=this.removeGift,f=this.handlePasswordChange,g=this.submitPassword,E=this.goBack;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"back-btn",onClick:E},r.a.createElement(S.b,null)),a?r.a.createElement("div",{className:"enter-password"},s&&r.a.createElement("span",null,s),r.a.createElement("input",{type:"password",value:o,placeholder:"Enter password",onChange:f,onKeyPress:function(e){return"Enter"===e.key?g():null},className:s?"incorrect":""}),r.a.createElement("button",{onClick:g},"Submit")):r.a.createElement("div",{className:"List"},r.a.createElement("h1",null,t.name),r.a.createElement("h2",null,"Created by: ",t.createdBy," on ",new Date(t.createdOn).toLocaleString()),r.a.createElement("div",{className:"people"},n&&n.map(function(e){return r.a.createElement(x,Object.assign({key:e.id},e,{bringPersonToFront:i,removePerson:c,handleToggleEditMode:u,handleEditInput:d,addGift:p,handleUpdateGift:m,removeGift:h}))}),r.a.createElement("button",{onClick:l,className:"create-person-card-btn"},r.a.createElement(S.a,null)))))}}]),t}(r.a.Component),T=(n(47),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"GiftLists"},r.a.createElement(m.a,{exact:!0,path:"/",component:C}),r.a.createElement(m.a,{path:"/list/:listId",component:N})))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,2,1]]]);
//# sourceMappingURL=main.dc6c5e7d.chunk.js.map